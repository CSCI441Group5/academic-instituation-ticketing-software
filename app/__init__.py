# Initializes the Flask application
# Registers blueprints and shared configuration

# Used to read environmental variables
import os
from flask import Flask, redirect, url_for

def create_app():
    # Creates and configures the Flask app, then registers blueprints
    app = Flask(__name__)

     # Set Flask SECRET_KEY from environment variable
     # If itâ€™s not set, it can cause issues, so use a temporary fallback
    app.config["SECRET_KEY"] = os.getenv("SECRET_KEY", "replace_later")

    from app.auth.routes import auth_bp
    # Register blueprint with the Flask app so routes defined in auth_bp become active
    app.register_blueprint(auth_bp)

    @app.get("/")
    def index():
        # Redirect root URL to login page
        return redirect(url_for("auth.login"))

    return app